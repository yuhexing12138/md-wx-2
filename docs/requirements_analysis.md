# Markdown-to-WeChat-Renderer 组件需求分析

本文档旨在详细描述一个通用的、专为微信公众号排版优化的 Markdown 渲染组件的功能需求。该组件将作为 NPM 包发布，方便其他项目集成和使用。

## 1. 核心功能

### 1.1. 预览组件

- **功能描述**：组件需提供一个预览区域，能够接收外部传入的 Markdown 格式的文本字符串。
- **实时渲染**：当外部文本内容发生变化时，预览区域应能实时、动态地更新渲染后的 HTML 视图。

### 1.2. 主题切换

- **功能描述**：组件需要预设多种视觉主题，以适应不同公众号的风格需求。用户可以通过交互界面切换主题，预览区域的样式随之改变。
- **预设主题**：内置不少于 5 个主题样式，默认使用第一个主题。主题列表如下：
    1.  **极致简约**：默认主题，设计克制，大量留白，类似 Notion 的现代文档风格，提供最纯粹的阅读体验。
    2.  **科技蓝调**：以经典的科技蓝为主色调，配以无衬线字体，营造专业、冷静的技术氛围，适合技术博客。
    3.  **优雅宋风**：采用衬线字体（宋体）与纸张质感的背景色，营造文学与艺术气息，适合情感、文化类文章。
    4.  **森系墨绿**：以自然清新的绿色为主调，配合柔和的背景色，营造轻松、治愈的阅读氛围，适合生活方式类内容。
    5.  **活力热红**：以醒目的红色作为强调色，风格大胆、现代且具有视觉冲击力，致敬少数派等潮流科技媒体风格。

### 1.3. 代码块样式

- **功能描述**：为了提升代码的可读性和美观度，代码块需要进行特殊样式处理。
- **装饰风格**：代码块的容器应模仿 macOS 窗口样式，包含“关闭、最小化、最大化”三个装饰性彩色图标。
- **高亮主题**：代码文本的语法高亮默认采用 `github-dark` 风格，确保在不同主题下代码都清晰易读。

### 1.4. 响应式设计

- **功能描述**：组件需要支持不同设备尺寸的预览，方便创作者检查在手机和桌面端的显示效果。
- **视图切换**：提供“手机”和“桌面”两种视图模式的切换功能。
- **默认视图**：组件初始化时，默认显示“手机”视图。

### 1.5. 内容复制

- **功能描述**：提供一键复制功能，将预览区域内渲染好的内容，转换为微信公众号编辑器支持的 HTML 格式，并复制到用户的剪贴板中。
- **样式兼容**：复制出的内容必须保证所有样式（包括主题、代码块样式等）以内联样式的形式存在，以便能正确粘贴到公众号编辑器中。

## 2. 用户界面与交互 (UI/UX)

### 2.1. 设置区域

- **功能描述**：所有配置项（如主题切换、视图切换、复制等）的控制按钮，都集成在一个设置区域中。
- **显示位置**：设置区域默认水平居中显示在预览区域的顶部。
- **悬浮固定**：当用户滚动预览内容时，顶部的设置区域应保持位置固定，不随内容滚动而消失。
- **图标化按钮**：设置区域内的所有功能按钮都应以直观的图标形式展示，以节省空间。

## 3. 组件可配置性

### 3.1. 设置区域可见性

- **功能描述**：组件的使用方可以通过传递参数来控制顶部设置区域是否显示。
- **默认行为**：默认情况下，设置区域是显示的。

### 3.2. 设置功能导出

- **功能描述**：为了满足更高度的自定义需求，组件应支持将内部的设置功能（如主题切换函数、视图切换函数等）导出。
- **自定义布局**：使用方可以利用导出的功能，在自己的项目界面中实现设置按钮，而不使用组件内置的顶部设置栏，从而可以自由地决定这些按钮的位置和排版。
