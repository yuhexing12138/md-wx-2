# md-wx 组件设计指南

本文档基于最新的 UI/UX 设计原型（`docs/ui-design.html`），为 md-wx 组件的开发提供详细的设计规范和实现指导。

## 1. 设计理念

### 1.1 核心设计原则

- **玻璃拟态设计**：采用现代化的玻璃拟态（Glassmorphism）设计语言，特别是在工具栏区域。
- **所见即所得**：提供高保真的实时预览体验。
- **微信原生适配**：深度适配微信公众号的原生设计语言和用户习惯，确保复制粘贴后的完美显示。
- **响应式交互**：流畅的手机/桌面视图切换，模拟真实设备体验。

### 1.2 视觉风格

- **背景系统**：采用动态光感背景，使用多个径向渐变（Radial Gradient）叠加，营造现代、通透的视觉基调。
    - 蓝色光晕：`rgba(59, 130, 246, 0.1)`
    - 紫色光晕：`rgba(139, 92, 246, 0.1)`
    - 粉色光晕：`rgba(236, 72, 153, 0.1)`
    - 绿色光晕：`rgba(34, 197, 94, 0.1)`
- **字体系统**：
    - 默认：`'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`
    - 代码：`'Fira Code', monospace`
    - 衬线（特定主题）：`"Songti SC", "Noto Serif SC", serif`
- **动画过渡**：所有主题切换和视图变换采用 `transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1)`。

## 2. 布局架构

### 2.1 整体布局

```
┌──────────────────────────────────────────────┐
│           悬浮工具栏 (Fixed Toolbar)          │
│      [主题选择] [视图切换] [复制按钮]          │
└──────────────────────┬───────────────────────┘
                       │
                       ▼
           ┌────────────────────────┐
           │                        │
           │      设备模拟容器       │
           │   (Mobile / Desktop)   │
           │                        │
           │    ┌──────────────┐    │
           │    │              │    │
           │    │   Markdown   │    │
           │    │   预览内容    │    │
           │    │              │    │
           │    └──────────────┘    │
           │                        │
           └────────────────────────┘
```

### 2.2 层级规范 (Z-Index)

- **Toast 提示**：`z-50`
- **工具栏 (Toolbar)**：`z-[100]` (确保在任何视口下都不被遮挡)
- **下拉菜单**：位于工具栏内部，自然层级较高
- **移动端刘海**：`z-50`

## 3. 组件设计规范

### 3.1 悬浮工具栏 (Floating Toolbar)

#### 3.1.1 容器样式
- **定位**：`fixed top-6`
- **背景**：`rgba(255, 255, 255, 0.7)`
- **模糊**：`backdrop-filter: blur(12px)`
- **边框**：`1px solid rgba(255, 255, 255, 0.3)`
- **圆角**：全圆角 (`rounded-full`)
- **阴影**：悬停时显示 `shadow-lg`

#### 3.1.2 交互元素
- **主题切换器**：
    - 图标 + 当前主题名称 + 下拉箭头
    - 悬停背景：`bg-white/80`
- **视图切换按钮**：
    - 圆形按钮，尺寸 `40px x 40px`
    - 图标动态切换：`fa-mobile-alt` <-> `fa-desktop`
- **复制按钮**：
    - 绿色强调色：`bg-green-500`
    - 悬停效果：`scale-105` + `shadow-lg`

### 3.2 预览容器 (PreviewContainer)

#### 3.2.1 移动端视图 (.view-mobile)
- **宽度**：`375px`
- **高度**：`min-height: 812px`
- **边框**：`12px solid #1a1a1a` (模拟机身边框)
- **圆角**：`40px`
- **装饰**：顶部刘海 (Notch) 模拟
- **内边距**：`20px`

#### 3.2.2 桌面端视图 (.view-desktop)
- **宽度**：`100%` (最大 `800px`)
- **高度**：`min-height: 800px`
- **边框**：`1px solid rgba(0,0,0,0.05)`
- **圆角**：`8px`
- **内边距**：`40px`

### 3.3 内容排版规范

#### 3.3.1 标题 (Headings)
- **H1**：`font-size: 1.6em`, 底部边框分割
- **H2**：`font-size: 1.4em`
    - **装饰**：左侧竖线 `border-left: 4px solid var(--accent-color)`
    - **间距**：`padding-left: 0.5em`
- **H3**：`font-size: 1.2em`

#### 3.3.2 代码块 (Code Block)
- **风格**：macOS 窗口风格（红黄绿装饰点）
- **背景**：`#1e1e1e` (强制深色)
- **文字**：`#c9d1d9` (强制浅色，确保高亮失败时的可读性)
- **圆角**：`8px`
- **阴影**：`0 10px 30px rgba(0,0,0,0.15)`
- **字体**：`'Fira Code', monospace`

#### 3.3.3 其他元素
- **链接**：虚线下划线，颜色跟随主题 `var(--link-color)`
- **引用块**：背景色 `var(--quote-bg)`，左侧边框 `4px solid var(--quote-border)`
- **内联代码**：背景 `rgba(0,0,0,0.06)`，文字颜色 `#d63384`

## 4. 主题系统

组件内置 5 套精选主题，通过 CSS 变量实现动态切换。

### 4.1 极致简约 (Minimalist)
- **ID**: `minimalist`
- **风格**：Notion 风格，大量留白，克制。
- **背景**：`#ffffff`
- **文字**：`#37352f`
- **强调色**：`#333333`
- **特点**：无引用块背景，纯粹的阅读体验。

### 4.2 科技蓝调 (Tech Blue)
- **ID**: `tech`
- **风格**：技术博客，冷静专业。
- **背景**：`#f8fafc` (Slate 50)
- **文字**：`#334155` (Slate 700)
- **强调色**：`#3b82f6` (Blue 500)
- **引用块**：淡蓝色背景 `#eff6ff`。

### 4.3 优雅宋风 (Elegant Serif)
- **ID**: `serif`
- **风格**：文学艺术，纸张质感。
- **背景**：`#fdfbf7` (暖纸色)
- **文字**：`#433422`
- **强调色**：`#8c4b26` (棕褐色)
- **字体**：`"Songti SC", "Noto Serif SC", serif`

### 4.4 森系墨绿 (Forest Green)
- **ID**: `forest`
- **风格**：自然治愈，生活方式。
- **背景**：`#f2fcf5` (薄荷绿)
- **文字**：`#2e4a3d` (深墨绿)
- **强调色**：`#2d8a5e`
- **引用块**：淡绿色背景 `#e1f5ea`。

### 4.5 活力热红 (Vibrant Red)
- **ID**: `red`
- **风格**：潮流媒体，醒目大胆。
- **背景**：`#ffffff`
- **文字**：`#2d1b21`
- **强调色**：`#e11d48` (Rose 600)
- **标题色**：`#be123c` (Rose 700)

## 5. 开发实现建议

### 5.1 目录结构更新

```
md-wx/
├── src/
│   ├── components/
│   │   ├── Renderer/          # 核心渲染组件
│   │   ├── Toolbar/           # 顶部工具栏
│   │   ├── Preview/           # 预览容器（含手机/桌面壳）
│   │   └── CodeBlock/         # 代码块装饰逻辑
│   ├── styles/
│   │   ├── themes.css         # 5套主题变量定义
│   │   ├── markdown.css       # Markdown 元素通用样式
│   │   └── index.css          # 全局样式 (Tailwind)
│   └── utils/
│       ├── copy.js            # 复制逻辑 (含内联样式处理)
│       └── highlight.js       # 代码高亮配置
```

### 5.2 关键技术点

1.  **样式内联 (Inline Styles)**：
    - 微信公众号不支持外部 CSS 类，复制时必须将 CSS 变量计算为具体色值，并内联到 HTML 标签中。
    - 建议使用 `juice` 或自行实现样式内联逻辑。

2.  **代码高亮**：
    - 使用 `highlight.js`。
    - 确保 `pre` 标签背景色和文字颜色硬编码，避免复制到公众号后在浅色模式下失效。

3.  **状态管理**：
    - `theme`: 当前选中的主题 ID。
    - `isMobile`: 当前视图模式。
    - `content`: Markdown 文本内容。

4.  **性能优化**：
    - 主题切换时仅切换父容器 CSS 类名 (`.theme-xxx`)，利用 CSS 变量自动更新样式，避免 JS 大量重绘。

---

本指南随 `docs/ui-design.html` 原型的迭代同步更新。
