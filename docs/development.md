# å¼€å‘æŒ‡å—

æœ¬æ–‡æ¡£ä¸»è¦ä»‹ç»å¦‚ä½•å‚ä¸ `md-wx-renderer` çš„å¼€å‘ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ `npm link` è¿›è¡Œæœ¬åœ°è°ƒè¯•ã€‚

## ğŸ›  ç¯å¢ƒå‡†å¤‡

1.  **å…‹éš†é¡¹ç›®**
    ```bash
    git clone https://github.com/your-repo/md-wx-2.git
    cd md-wx-2
    ```

2.  **å®‰è£…ä¾èµ–**
    ```bash
    npm install
    ```

3.  **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
    è¿™å°†å¯åŠ¨ä¸€ä¸ªåŒ…å«ç¤ºä¾‹çš„æ¼”ç¤ºé¡µé¢ï¼Œç”¨äºå¿«é€Ÿé¢„è§ˆç»„ä»¶æ•ˆæœã€‚
    ```bash
    npm run dev
    ```

4.  **æ„å»ºåº“**
    é¡¹ç›®é…ç½®äº† Vite çš„åº“æ¨¡å¼ (Library Mode)ï¼Œç”¨äºæ‰“åŒ…ç”Ÿäº§ç¯å¢ƒä»£ç ã€‚
    ```bash
    npm run build
    ```

---

## ğŸ”— æœ¬åœ°è°ƒè¯• (npm link)

åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½éœ€è¦åœ¨å®é™…çš„ä¸šåŠ¡é¡¹ç›®ä¸­æµ‹è¯•ç»„ä»¶ï¼Œè€Œä¸æ˜¯ä»…ä»…åœ¨ demo é¡µé¢ä¸­é¢„è§ˆã€‚ä½¿ç”¨ `npm link` å¯ä»¥æ–¹ä¾¿åœ°å®ç°è¿™ä¸€ç‚¹ã€‚

### ç¬¬ä¸€æ­¥ï¼šåœ¨ç»„ä»¶åº“ä¸­åˆ›å»ºé“¾æ¥

åœ¨ `md-wx-2` é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š

```bash
# 1. ç¡®ä¿å…ˆæ„å»ºä¸€æ¬¡ï¼Œç”Ÿæˆ dist ç›®å½•
npm run build

# 2. åˆ›å»ºå…¨å±€è½¯é“¾æ¥
npm link
```

æ‰§è¡ŒæˆåŠŸåï¼Œnpm ä¼šåœ¨å…¨å±€ `node_modules` ä¸­åˆ›å»ºä¸€ä¸ªæŒ‡å‘å½“å‰é¡¹ç›®ç›®å½•çš„ç¬¦å·é“¾æ¥ã€‚

### ç¬¬äºŒæ­¥ï¼šåœ¨æµ‹è¯•é¡¹ç›®ä¸­å¼•å…¥é“¾æ¥

å‡è®¾ä½ æœ‰ä¸€ä¸ªåä¸º `my-blog-app` çš„ React é¡¹ç›®ï¼Œæƒ³è¦åœ¨å…¶ä¸­æµ‹è¯•è¿™ä¸ªç»„ä»¶ã€‚

```bash
cd path/to/my-blog-app

# é“¾æ¥åˆ°ç»„ä»¶åº“
npm link md-wx-renderer
```

### ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨ç»„ä»¶

ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨ `my-blog-app` ä¸­åƒä½¿ç”¨æ™®é€š npm åŒ…ä¸€æ ·ä½¿ç”¨å®ƒï¼š

```javascript
import { MdWxRenderer } from 'md-wx-renderer';
import 'md-wx-renderer/dist/style.css'; // æ³¨æ„ï¼šæœ¬åœ°è°ƒè¯•æ—¶å¯èƒ½éœ€è¦æŒ‡å‘ dist ç›®å½•ä¸‹çš„æ ·å¼

// ... ä½¿ç”¨ç»„ä»¶
```

### ç¬¬å››æ­¥ï¼šå®æ—¶è°ƒè¯•

1.  ä¿®æ”¹ `md-wx-2` ä¸­çš„æºç ã€‚
2.  ç”±äºæ˜¯åº“æ¨¡å¼ï¼Œé€šå¸¸éœ€è¦é‡æ–°æ„å»ºæ‰èƒ½ç”Ÿæ•ˆã€‚ä½ å¯ä»¥å¼€å¯ç›‘å¬æ¨¡å¼ï¼š
    ```bash
    # åœ¨ md-wx-2 ç›®å½•ä¸‹
    npm run build -- --watch
    ```
3.  Vite ä¼šç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶è‡ªåŠ¨é‡æ–°æ‰“åŒ…ã€‚ä½ çš„ `my-blog-app` å¦‚æœä¹Ÿåœ¨è¿è¡Œä¸­ï¼ˆä¾‹å¦‚ `npm run dev`ï¼‰ï¼Œé€šå¸¸ä¼šè‡ªåŠ¨çƒ­æ›´æ–°æˆ–åˆ·æ–°é¡µé¢ã€‚

### ç¬¬äº”æ­¥ï¼šè§£é™¤é“¾æ¥

è°ƒè¯•å®Œæˆåï¼Œè®°å¾—è§£é™¤é“¾æ¥ä»¥é¿å…å½±å“åç»­å¼€å‘ã€‚

**åœ¨æµ‹è¯•é¡¹ç›® (`my-blog-app`) ä¸­ï¼š**
```bash
npm unlink md-wx-renderer
npm install # é‡æ–°å®‰è£…çœŸå®çš„è¿œç¨‹ä¾èµ–ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
```

**åœ¨ç»„ä»¶åº“é¡¹ç›® (`md-wx-2`) ä¸­ï¼š**
```bash
npm unlink
```

## âš ï¸ å¸¸è§é—®é¢˜

### React å¤šé‡å®ä¾‹é—®é¢˜
ä½¿ç”¨ `npm link` æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ° "Invalid hook call" æˆ– "React has been loaded twice" çš„é”™è¯¯ã€‚è¿™æ˜¯å› ä¸ºæµ‹è¯•é¡¹ç›®å’Œç»„ä»¶åº“å„è‡ªä½¿ç”¨äº†è‡ªå·±çš„ `react` å‰¯æœ¬ã€‚

**è§£å†³æ–¹æ³•ï¼š**
åœ¨ç»„ä»¶åº“ (`md-wx-2`) ä¸­é“¾æ¥æµ‹è¯•é¡¹ç›®çš„ Reactã€‚

```bash
cd md-wx-2
npm link ../my-blog-app/node_modules/react
```

æˆ–è€…åœ¨ `vite.config.js` ä¸­é…ç½® `resolve.alias` æŒ‡å‘å”¯ä¸€çš„ React å®ä¾‹ã€‚

## ğŸ“ ç›®å½•ç»“æ„è¯´æ˜

```text
md-wx-renderer/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/        # ç»„ä»¶æºç 
â”‚   â”œâ”€â”€ styles/            # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ index.js           # å…¥å£æ–‡ä»¶
â”œâ”€â”€ dist/                  # æ„å»ºäº§ç‰©
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ vite.config.js         # Vite é…ç½®
```
